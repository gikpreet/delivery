= Azure 저장소 계정(Azure Storage Account)

Azure Storage Account는 Blob(파일), 파일 공유, 테이블(NoSQL), 큐(메시지) 등 다양한 종류의 데이터를 담는 클라우드상의 통합 스토리지 서비스입니다.

쉽게 말해, 클라우드에 있는 **'만능 저장소'**라고 생각할 수 있습니다. 데이터를 저장하기 위해 필요한 모든 기능을 하나의 계정 아래에 묶어 제공하며, 이 계정을 통해 데이터에 접근하고 관리합니다.

== 핵심 서비스

하나의 저장소 계정 안에는 목적에 따라 다음과 같은 여러 종류의 스토리지 서비스를 만들 수 있습니다.

1. Blob Storage +
이미지, 동영상, 문서, 백업 파일 등 대용량 비정형 데이터를 저장합니다. 웹사이트의 콘텐츠나 대규모 데이터 분석을 위한 데이터 레이크로 가장 흔하게 사용됩니다.
2. Azure Files +
클라우드에서 완벽하게 관리되는 **네트워크 파일 공유(네트워크 드라이브)**를 제공합니다. 여러 가상 머신(VM)에서 동시에 파일에 접근하거나, 기존 온프레미스 파일 서버를 클라우드로 대체할 때 사용합니다.
3. Queue Storage +
목적: 애플리케이션의 여러 부분 간에 메시지를 안정적으로 전달하는 통로 역할을 합니다. 작업량이 많을 때 요청을 순서대로 처리하거나, 서로 다른 서비스 간의 비동기 통신을 구현할 때 사용됩니다.+
4. Table Storage +
스키마가 없는 구조화된 NoSQL 데이터를 저장합니다. 사용자 프로필, 주소록 등 대량의 데이터를 빠르고 저렴하게 저장하고 조회할 때 유용합니다.

== 데이터 이중화 (Data Redundancy)

데이터의 내구성과 고가용성을 보장하기 위해 Azure는 여러 복제 전략을 제공합니다.

* LRS (로컬 중복 저장소 / Locally-redundant storage) +
단일 데이터 센터 내의 서로 다른 물리적 랙(Rack)에 데이터를 3번 복제합니다. 가장 저렴한 옵션이지만, 데이터 센터 전체에 장애가 발생하면 데이터를 유실할 수 있습니다.
* ZRS (영역 중복 저장소 / Zone-redundant storage) +
한 지역(Region) 내의 서로 다른 가용성 영역(Availability Zones)에 걸쳐 데이터를 3번 복제합니다. 각 가용성 영역은 독립된 전원, 냉각, 네트워크를 갖춘 물리적 데이터 센터이므로 LRS보다 높은 가용성을 제공합니다.
* GRS (지역 중복 저장소 / Geo-redundant storage) +
기본 지역(Primary Region)에서 LRS 방식으로 3번 복제하고, 이 데이터를 수백 마일 떨어진 보조 지역(Secondary Region)에 비동기적으로 3번 더 복제합니다. 총 6개의 복사본을 유지하여 지역 전체의 재해에 대비할 수 있습니다.
* GZRS (지역 영역 중복 저장소 / Geo-zone-redundant storage) +
ZRS와 GRS를 결합한 가장 강력한 옵션입니다. 기본 지역에서 ZRS 방식으로 3번 복제하고, 이 데이터를 보조 지역에 LRS 방식으로 3번 복제합니다. 최고의 내구성과 가용성을 제공합니다.

== 성능 계층 및 계정 종류

Storage Account는 워크로드의 요구 사항에 따라 성능 계층을 선택할 수 있습니다.

* Standard (표준) +
**HDD(하드 디스크 드라이브)**를 기반으로 하는 범용 계층입니다. Blob, Files, Queues, Tables 등 모든 스토리지 서비스를 지원하며, 대부분의 일반적인 워크로드에 적합합니다. 비용 효율성이 높습니다.
* Premium (프리미엄) +
**SSD(솔리드 스테이트 드라이브)**를 기반으로 하여 매우 낮은 대기 시간(latency)과 높은 IOPS(초당 입출력 작업 수)를 제공합니다. 트랜잭션이 많은 고성능 워크로드에 최적화되어 있습니다. Premium 계층은 목적에 따라 다음과 같이 특화됩니다.
** Block Blobs: 고성능 애플리케이션이나 데이터 분석을 위한 블록 Blob 저장에 최적화되어 있습니다.
** File Shares: 고성능이 요구되는 엔터프라이즈급 SMB/NFS 파일 공유(Azure Files)에 사용됩니다.
** Page Blobs: Azure Virtual Machine의 OS 및 데이터 디스크를 위한 페이지 Blob 저장에 사용됩니다.

== Blob Storage 접근 계층 (Access Tiers)

Blob Storage는 데이터의 접근 빈도에 따라 비용을 최적화할 수 있도록 여러 접근 계층을 제공합니다.

* Hot (핫) +
자주 접근하는 데이터를 위한 계층입니다. 스토리지 저장 비용은 가장 높지만, 데이터에 접근할 때 발생하는 트랜잭션 비용은 가장 저렴합니다. (예: 웹사이트의 이미지, 동영상)
* Cool (쿨) +
최소 30일 이상 보관하고 가끔 접근하는 데이터를 위한 계층입니다. 저장 비용은 Hot 계층보다 저렴하지만, 접근 비용은 더 비쌉니다. (예: 단기 백업, 로그 파일)
* Cold (콜드) +
최소 90일 이상 보관하고 거의 접근하지 않는 데이터를 위한 계층입니다. 저장 비용은 더욱 저렴하지만 접근 비용은 더 높습니다. (예: 규정 준수를 위한 원본 데이터)
* Archive (보관) +
최소 180일 이상 보관하며 거의 접근하지 않는 장기 보관용 데이터를 위한 계층입니다. 저장 비용이 압도적으로 저렴하지만, 데이터를 읽으려면 몇 시간의 '리하이드레이션(rehydration)' 시간이 필요하며 접근 비용이 가장 비쌉니다. (예: 법적 보관 데이터, 장기 백업)

== 엔드포인트 및 보안

고유 네임스페이스 (Unique Namespace): 저장소 계정을 만들면 전역적으로 고유한 네임스페이스가 생성됩니다. 각 서비스는 다음과 같은 형식의 고유한 엔드포인트(Endpoint)를 가집니다.

* Blob: `https://<account_name>.blob.core.windows.net`
* File: `https://<account_name>.file.core.windows.net`
* Queue: `https://<account_name>.queue.core.windows.net`
* Table: `https://<account_name>.table.core.windows.net`

인증 및 권한 부여 (Security): 데이터 접근은 엄격하게 통제됩니다.

* 저장소 계정 액세스 키 +
계정에 대한 전체 관리자 권한을 가진 두 개의 기본 키(Primary/Secondary)를 제공합니다.
* SAS (공유 액세스 서명 / Shared Access Signature) +
특정 리소스에 대해 특정 권한(읽기, 쓰기 등)과 유효 기간을 지정하여 제한된 접근 권한을 가진 URL 토큰을 생성할 수 있습니다.
* Microsoft Entra ID (Azure AD) 통합 +
Azure 역할 기반 접근 제어(RBAC)를 통해 사용자, 그룹, 서비스 주체에게 세분화된 데이터 접근 권한을 부여할 수 있습니다.
* 네트워크 보안 +
가상 네트워크 서비스 엔드포인트나 Private Endpoint를 사용하여 특정 네트워크에서만 스토리지 계정에 접근하도록 제한할 수 있습니다.

---

